## Star Power :sparkles:

#### If you like my work please star :star: the repo.

<br />
<p align="center">
  <h1 align="center">:movie_camera: venues-production :clapper:</h1>

  <p align="center">
    Quasar SSR :zap: deployed on DigitalOcean :surfer: using NGINX and PM2.
    <br />
    <br />
    <br />
    <img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/venues-production.gif?raw=true" width="1000px" />
    <br />
    <br />
    <a href="https://lovejs.dev/">View Demo</a>
    ·
    <a href="https://thevenuesvr.netlify.com/#The_Atrium">View 360 Panoramas</a>
    ·
    <a href="https://github.com/Mary-Tyler-Moore/venues-production/issues">Report Bug</a>
    ·
    <a href="https://github.com/Mary-Tyler-Moore/venues-production/issues">Request Feature</a>
  </p>
</p>

<br />

## Tech Stack

> Check out the other tech stacks I use at [Stack Share](https://stackshare.io/Mary-Tyler-Moore)

<img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/venues-production-stack.png?raw=true" width="1000px" />

<br />

## Motivation:  :running: :dash: :exclamation: :tiger2:

#### Working with Quasar CLI has been a game changer for my development and deployment work flow. This README documents the deployment of a Quasar SSR build on DigitalOcean using PM2 and NGINX.


<br />

# Quasar Framework

![Quasar Framework logo](https://cdn.quasar.dev/logo/svg/quasar-logo-full-inline.svg)

> Build responsive Single Page Apps, **SSR Apps**, PWAs, Hybrid Mobile Apps and Electron Apps, all using the same codebase!, powered with Vue.

<br />

## :moneybag: Supporting Quasar
Quasar Framework is an MIT-licensed open source project. Its ongoing development is made possible thanks to the support by these awesome [backers](https://github.com/rstoenescu/quasar-framework/blob/dev/backers.md).

**Please read our manifest on [Why donations are important](https://quasar.dev/why-donate)**. If you'd like to become a donator, check out [Quasar Framework's Donator campaign](https://donate.quasar.dev).

<br />

## :mag_right: Useful Resources:

## Chat Support

Ask questions at the official community Discord server: [https://chat.quasar.dev](https://chat.quasar.dev)

## Community Forum

Ask questions at the official community forum: [https://forum.quasar.dev](https://forum.quasar.dev)

## Stay in Touch

For latest releases and announcements, follow on Twitter: [@quasarframework](https://twitter.com/quasarframework)

## Join Quasar on Discord:

###### [Quasar Framework Invitation](https://discordapp.com/invite/5TDhbDg)

### Quasar on Github:

###### [quasarframework/quasar](https://github.com/quasarframework/quasar)

###### [Sponsor Quasar](https://github.com/sponsors/rstoenescu)

###### [quasar-awesome](https://github.com/quasarframework/quasar-awesome)

## Documentation

Head on to the Quasar Framework official website: [https://quasar.dev](https://quasar.dev)

###### [CLI Documentation](https://quasar.dev/start/quasar-cli)

<br />

---

<br />

## :rocket: To-do:

- [x] Write README.md
- [ ] Replace placeholder images with gifs
- [x] Setup Prettier
- [ ] Clean up folder structure
- [ ] Create 1 template card to replace the cards used for each room
- [ ] Move hard coded data from cards to external JSON file
- [ ] Move all project example images to Cloudflare CDN.
- [ ] Update contact page


<br />

---

<br />

## :calendar: Project History

## Performance Improvements

<img src="https://github.com/Mary-Tyler-Moore/README-preview/blob/master/puppy-race.gif?raw=true" width="1000" />

<br />

#### Before:

SPA Build deployed on LAMP stack 

<img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/venues-before.png?raw=true" height="500" />

<br />

#### After:

SSR Build deployed on DigitalOcean using PM2 and NGINX as server proxy

<img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/lovejs-lighthouse.png?raw=true" height="500" />

<br />

### :electric_plug: Install NetData:

> [**NetData**](https://github.com/netdata/netdata) is **distributed, real-time, performance and health monitoring for systems and applications**. Netdata is **free, open-source software** and it currently runs on **Linux**, **FreeBSD**, and **MacOS**, along with
other systems derived from them, such as **Kubernetes** and **Docker**.


<br />

### :chart_with_upwards_trend: Server Performance

#### httperf
> [httperf](https://github.com/httperf/httperf) is a tool :hammer: for measuring web server performance. It provides a flexible facility for generating various HTTP workloads and for measuring server performance.

#### Load Testing Server (WIP)
> I am developing a test to demonstrate the load on our servers at the start (3,000 concurrent connections) of a University Football :football: Game. We see the largest amount of traffic 15 minutes before the game begins, and half time when the fans are using our Login Portal to access the free WiFi service my company provides at the games.
  
<br />  
  
### :art: UI/UX Improvments:

### Mobile UI:

<img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/compare-mobile-arrow.png?raw=true" height="500" />

### Mobile Menu:

<img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/mobile-compare-2.png?raw=true" height="500" />

### Mobile Room Details:

<img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/mobile-room-info.png?raw=true" height="500" />

<br />

## Table of Contents

- [About the Project](#about-the-project)
  - [Built With](#built-with)
- [Getting Started](#getting-started)
  - [Prerequisites](#prerequisites)
  - [Installation](#installation)
- [Usage](#usage)
- [Roadmap](#roadmap)
- [Contributing](#contributing)
- [License](#license)
- [Contact](#contact)
- [Acknowledgements](#acknowledgements)

## :cd: About The Project

## :earth_americas: i18n:
> Traduzco del inglés al español.

### src/i18n/en-us/index.js
<img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/i18n-en-us.png?raw=true" />

### src/i18n/es/index.js
<img src="https://github.com/Mary-Tyler-Moore/venues-production/blob/master/src/statics/i18n-es.png?raw=true" />


### Built With

- []() Quasar
- []() VueJS
- []() SCSS

### Project Features

- []() i18n
- []() a11y
- []() Vuex
- []() Dark Mode
- []() SSR Deployment Guide (Currently a WIP)

## Getting Started

To get a local copy up and running follow these simple steps.

### Prerequisites

This is an example of how to list things you need to use the software and how to install them.

- npm

```sh
npm install npm@latest -g
```

### :electric_plug: Installation

1. Clone the repo

```sh
git clone https://github.com/Mary-Tyler-Moore/venues-production.git
```

2. Install NPM packages

```sh
npm install
```

### :hammer: Build the app for production

```bash
quasar build -m ssr
```

### Add Icon-Genie Extension

```bash
quasar ext add @quasar/icon-genie
```

<br />

## :neckbeard: Node.js Deployment (Currently a WIP!)

> Steps to deploy a Node.js app to DigitalOcean using PM2, NGINX as a reverse proxy and an SSL from LetsEncrypt

## 1. Sign up for Digital Ocean :surfer:

If you use the referal link below, you get \$10 free (1 or 2 months)
https://m.do.co/c/5424d440c63a

## 2. Create a droplet and log in via ssh :computer:

I will be using the root user, but would suggest creating a new user

## 3. Install :arrow_heading_down: Node/NPM

```
curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -

sudo apt install nodejs

node --version
```

<img src="http://placekitten.com/810/510" />

## 4. Clone your project from Github :octocat:

There are a few ways to get your files on to the server, I would suggest using Git

```
git clone yourproject.git
```

<img src="http://placekitten.com/820/500" />

### 5. Install dependencies and test app

```
cd yourproject
npm install
npm start (or whatever your start command)
# stop app
ctrl+C
```

<img src="http://placekitten.com/805/500" />

## 6. Setup PM2 process manager to keep your app running :running: :dash: :exclamation: :tiger2:

```
sudo npm i pm2 -g
pm2 start app (or whatever your file name)

# Other pm2 commands
pm2 show app
pm2 status
pm2 restart app
pm2 stop app
pm2 logs (Show log stream)
pm2 flush (Clear logs)

# To make sure app starts when reboot
pm2 startup ubuntu
```

### You should now be able to access your app using your IP and port. Now we want to setup a firewall blocking that port and setup NGINX as a reverse proxy so we can access it directly using port 80 (http)

<img src="http://placekitten.com/800/500" />

## 7. Setup ufw firewall

```
sudo ufw enable
sudo ufw status
sudo ufw allow ssh (Port 22)
sudo ufw allow http (Port 80)
sudo ufw allow https (Port 443)
```

<img src="http://placekitten.com/801/500" />

## 8. Install NGINX and configure

```
sudo apt install nginx

sudo nano /etc/nginx/sites-available/default
```

Add the following to the location part of the server block

```
    server_name yourdomain.com www.yourdomain.com;

    location / {
        proxy_pass http://localhost:5000; #whatever port your app runs on
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
```

```
# Check NGINX config
sudo nginx -t

# Restart NGINX
sudo service nginx restart
```

### You should now be able to visit your IP with no port (port 80) and see your app. Now let's add a domain

<img src="http://placekitten.com/800/503" />

## 9. Add domain in Digital Ocean

In Digital Ocean, go to networking and add a domain

Add an A record for @ and for www to your droplet

## Register and/or setup domain from registrar

I prefer Namecheap for domains. Please use this affiliate link if you are going to use them
https://namecheap.pxf.io/c/1299552/386170/5618

Choose "Custom nameservers" and add these 3

- ns1.digitalocean.com
- ns2.digitalocean.com
- ns3.digitalocean.com

It may take a bit to propogate

## 10. Add SSL with LetsEncrypt

```
sudo add-apt-repository ppa:certbot/certbot
sudo apt-get update
sudo apt-get install python-certbot-nginx
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# Only valid for 90 days, test the renewal process with
certbot renew --dry-run
```

Now visit https://yourdomain.com and you should see your Node app

<img src="http://placekitten.com/800/505" />

## Usage

I hope this is useful to anyone working with Quasar and VueJS. I'd also like to provide an easy way for folks to share 360 panoramas.

## Roadmap

See the [open issues](https://github.com/Mary-Tyler-Moore/venues-production/issues) for a list of proposed features (and known issues).

## Contributing

Contributions are what make the open source community such an amazing place to be learn, inspire, and create. Any contributions you make are **greatly appreciated**.

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## License

Distributed under the Creative Commons BY-NC-SA License. See `LICENSE` for more information.

## Acknowledgements

- I want to thank [nothingismagick](https://github.com/nothingismagick) for writing this [guide](https://dev.to/nothingismagick/setup-and-serve-quasar-ssr-in-a-droplet-in-30-minutes-and-in-3-quick-and-easy-steps-49kp).
- I want to thank [Brad Traversy](https://github.com/bradtraversy) for providing this [gist](https://gist.github.com/bradtraversy/cd90d1ed3c462fe3bddd11bf8953a896)
  that I used as a reference.
- I also want to thank [Nisgrak](https://github.com/Nisgrak) for helping me correct errors in my [Spanish translation](https://github.com/Mary-Tyler-Moore/venues-production/commit/c5d52667c6f27c9144153f0714a133731536403c).
